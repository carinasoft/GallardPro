
 

<form class="" [formGroup]="indentForm">
  <div class="h2 mb-12">No. Of Product <span style="float: right;">


      <!-- <button type="button" mat-raised-button color="warn" *ngIf=" (vendorList1 | async) && !(vendorList1 | async).length && CheckProductHave  " matSuffix>
          <mat-icon  (click)="addVendorDetail()">add</mat-icon>New Product
          </button>  -->
    
    
    <button mat-icon-button mat-dialog-close>
        <mat-icon>close</mat-icon>
      </button></span></div>
  <div class="text-center" *ngIf="!showButton">

      <button  mat-raised-button type="button" color="accent" (click)="showForm()"><mat-icon class="Blink">add_circle_outline</mat-icon> Add No. of Product</button>
       &nbsp;&nbsp;
      <!-- <button mat-raised-button mat-dialog-close type="button" color="warn">Later</button> -->
    <!-- <mat-form-field>
      <mat-label>No. of product</mat-label> <input type="text" placeholder=" " matInput>
    </mat-form-field>
    &nbsp;<span><button mat-raised-button type="button">Create Row for product</button></span> -->
  </div>

  <!-- <div class="" fxflex="1 0 auto" fxlayout="row" fxlayoutalign="start center">
                    <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
                            <mat-label>casting</mat-label>
                            <mat-select placeholder="Category" >
                                    <mat-option value="option1">Option 1</mat-option>
                                    <mat-option value="option2" >Option 2 </mat-option>
                                    <mat-option value="option3">Option 3</mat-option>
                            </mat-select>
                        </mat-form-field>

                        <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
                            <mat-label>grade</mat-label>
                            <mat-select placeholder="Category" >
                                    <mat-option value="option1">Option 1</mat-option>
                                    <mat-option value="option2" >Option 2 </mat-option>
                                    <mat-option value="option3">Option 3</mat-option>
                            </mat-select>
                        </mat-form-field>
        
                <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
                    <mat-label>Product</mat-label>
                    <input type="text" placeholder="" matInput > 
                   
                </mat-form-field>
                <mat-form-field  fxFlex="10" class="pr-24" appearance="outline">
                        <mat-label>No. of pieces</mat-label>
                        <input type="text" placeholder="" matInput > 
                    </mat-form-field>
                    <mat-form-field  fxFlex="10" class="pr-24" appearance="outline">
                            <mat-label> Rate / kg</mat-label>
                            <input type="text" placeholder="" matInput > 
                        </mat-form-field>
                        <mat-form-field  fxFlex="10" class="pr-24" appearance="outline">
                            <mat-label> Notes</mat-label>
                            <input type="text" placeholder="" matInput > 
                        </mat-form-field>

                
                        <button type="button" mat-icon-button  matSuffix>
                                <mat-icon  (click)="addRow()">add_circle_outline</mat-icon>
                                </button>
            </div> -->

  <!--
              ============================================================================
          -->

          <div *ngIf="showButton">
          <div formArrayName="items"
          *ngFor="let item of indentForm.get('items')['controls']; let i = index;"  [@fadeInOut]>
          <div [formGroupName]="i">
        
  <div class="" fxflex="1 0 auto" fxlayout="row" fxlayoutalign="start center">
    <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label>casting</mat-label>
      <mat-select placeholder="Category" (selectionChange)="getGrade($event.value)" formControlName="CastingId">
        <mat-option *ngFor="let casting of dataSource" [value]="casting.ID">{{casting.Name}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field fxFlex="15" class="pr-24" appearance="outline">
      <mat-label>grade</mat-label>
      <input type="text" placeholder="Type to search.." formControlName="GradeID" matInput
        [matAutocomplete]="materialDDDD">
      <mat-autocomplete #materialDDDD="matAutocomplete" >
        <mat-option *ngFor="let grade of gradelist" [value]="grade.GradeName" >
          {{grade.GradeName}}
        </mat-option>
      </mat-autocomplete>
      <!-- <mat-select placeholder="Category" formControlName="GradeID" >
        <mat-option [value]="grade.ID" *ngFor="let grade of gradelist1[i] | async">{{grade.GradeName}}</mat-option>
      </mat-select> -->
    </mat-form-field>

    <mat-form-field fxFlex="30" class="pr-24" appearance="outline">
      <mat-label>Product</mat-label>
      <input type="text" placeholder="Type to search.." formControlName="ProductId" matInput
        [matAutocomplete]="materialDD">
      <mat-autocomplete #materialDD="matAutocomplete" [displayWith]="displayFn">
        <mat-option *ngFor="let vendor of vendorList1 | async" [value]="vendor.Name"
          (onSelectionChange)="onSelectVendor($event,i)">
          {{vendor.Name}}
        </mat-option>
      </mat-autocomplete>
     <!-- <button type="button" mat-icon-button  *ngIf="(vendorList1 | async) && !(vendorList1 | async).length && item.get('ProductId').value " matSuffix>
          <mat-icon  (click)="addVendorDetail()" matTooltip="Add {{item.get('ProductId').value  && (vendorList1 | async) && !(vendorList1 | async).length}}">person_add</mat-icon>
          </button>  -->
<button type="button" mat-icon-button  *ngIf=" (vendorList1 | async) && !(vendorList1 | async).length && item.get('ProductId').value && CheckProductHave && checkindex == i" matSuffix>
<mat-icon  (click)="addVendorDetail(i)" matTooltip="Add {{item.get('ProductId').value}}">add_circle_outline</mat-icon>
</button>   
</mat-form-field>


    <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label>No. of pieces</mat-label>
      <input type="text" placeholder="" matInput formControlName="NoofPieces">
    </mat-form-field>
    <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label> Rate / kg</mat-label>
      <input type="text" placeholder="" matInput formControlName="Rate">
    </mat-form-field>
    <mat-form-field fxFlex="20" class="pr-24" appearance="outline">
      <mat-label> Notes</mat-label>
      <input type="text" placeholder="" matInput formControlName="Note">
    </mat-form-field>
    <!-- <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label>NetWeight</mat-label>
      <input type="text" placeholder="" matInput formControlName="NetWeight">
    </mat-form-field>
    <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label>GrossWeight</mat-label>
      <input type="text" placeholder="" matInput formControlName="GrossWeight">
    </mat-form-field>
    <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label>TotalNetWeight</mat-label>
      <input type="text" placeholder="" matInput formControlName="TotalNetWeight">
    </mat-form-field>
    <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label>TotalGrossWeight</mat-label>
      <input type="text" placeholder="" matInput formControlName="TotalGrossWeight">
    </mat-form-field>
    <mat-form-field fxFlex="10" class="pr-24" appearance="outline">
      <mat-label>EstimatePrice</mat-label>
      <input type="text" placeholder="" matInput formControlName="EstimatePrice">
    </mat-form-field> -->

    <!-- <button type="button" mat-icon-button  matSuffix>
                            <mat-icon  style="color:red;">close</mat-icon>
                            </button> -->
    <button type="button" mat-icon-button matSuffix *ngIf=" (vendorList1 | async) && (vendorList1 | async).length && item.get('ProductId').value">
      <mat-icon (click)="addRow()">add_circle_outline</mat-icon>
    </button>
  <button mat-icon-button    color="primary" (click)="removeItem(i)" *ngIf="indentForm.get('items')['controls'].length > 1">
      <mat-icon style="color:red;">delete</mat-icon>
    </button> 
  </div>



</div></div>

</div>
  <!--
              ==================================================================================
          -->

  <div *ngIf="!indentForm.invalid">
    <button mat-raised-button type="button" color="accent" onclick="this.disabled = true" (click)="saveWorkOrder()">
      Save
    </button>


  </div>

</form>


<br>
<!--*ngIf="DetailList != ''"    *ngIf="showButton"  -->
<div class="mat-elevation-z8" >
  <mat-table [dataSource]="DetailList" matSort  >

    <!-- ID Column -->
    <ng-container matColumnDef="id">
      <mat-header-cell *matHeaderCellDef mat-sort-header fxFlex="5">SNo.</mat-header-cell>
      <mat-cell *matCellDef="let row; let i = index" fxFlex="5" > 
          <p class="text-truncate" >{{i+1}} </p></mat-cell>
    </ng-container>

    <!-- Progress Column -->
    <ng-container matColumnDef="progress">
      <mat-header-cell *matHeaderCellDef mat-sort-header fxFlex="10" class="css">Base</mat-header-cell>
      <mat-cell *matCellDef="let row" fxFlex="10" class="css"> 
          <p class="text-truncate" >{{row.Name}} </p>
          <!-- <div *ngIf="row.isEditable">

   
    <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
    <mat-select placeholder="Category" (selectionChange)="getGrade($event.value)" [(ngModel)]="row.Name">
        <mat-option *ngFor="let casting of dataSource" [value]="casting.ID">{{casting.Name}}</mat-option>
      </mat-select>
    </mat-form-field>
        </div> -->
      </mat-cell>
    </ng-container>

    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <mat-header-cell *matHeaderCellDef mat-sort-header class="css">Grade</mat-header-cell>
      <mat-cell *matCellDef="let row"  class="css"> 
          <p class="text-truncate" >{{row.GradeName}} </p>
          <!-- <div *ngIf="row.isEditable">
              <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
              <mat-select placeholder="Category"  [(ngModel)]="row.GradeName" >
                  <mat-option [value]="grade.ID" *ngFor="let grade of gradelist">{{grade.GradeName}}</mat-option>
                </mat-select>
                </mat-form-field>
          </div> -->
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="name1">
      <mat-header-cell *matHeaderCellDef mat-sort-header  class="css">Product</mat-header-cell>
      <mat-cell *matCellDef="let row" class="css"> 
          <p class="text-truncate" >{{row.ProductName}}   </p>
              <!-- <div *ngIf="row.isEditable">
                  <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">

                      <input type="text" placeholder="Type to search.." [(ngModel)]="row.ProductName" matInput
                      [matAutocomplete]="materialDD">
                    <mat-autocomplete #materialDD="matAutocomplete">
                      <mat-option *ngFor="let vendor of vendorList1 | async" [value]="vendor.Name"
                        (onSelectionChange)="onSelectVendor(vendor)">
                        {{vendor.Name}}
                      </mat-option>
                    </mat-autocomplete>


                    </mat-form-field>
                    </div> -->
        
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="name2">
      <mat-header-cell *matHeaderCellDef mat-sort-header fxFlex="6">Net Weight</mat-header-cell>
      <mat-cell *matCellDef="let row" fxFlex="6"> 
          <p class="text-truncate" >{{row.NetWeight}} </p>
          
      </mat-cell>
    </ng-container>

    <!-- <ng-container matColumnDef="name3">
      <th mat-header-cell *matHeaderCellDef mat-sort-header >gross wight</th>
      <td mat-cell *matCellDef="let row"  > 
          <p class="text-truncate" >{{row.GrossWeight}} </p>
          
      </td>
    </ng-container> -->
    <ng-container matColumnDef="name4">
      <mat-header-cell *matHeaderCellDef mat-sort-header fxFlex="6">Total Weight</mat-header-cell>
      <mat-cell *matCellDef="let row" fxFlex="6"> 
          <p class="text-truncate" >{{row.TotalNetWeight}} </p>
          
      </mat-cell>
    </ng-container>
    <!-- <ng-container matColumnDef="name5">
      <th mat-header-cell *matHeaderCellDef mat-sort-header >total gross wight</th>
      <td mat-cell *matCellDef="let row" > 
          <p class="text-truncate" >{{row.TotalGrossWeight}}</p>
         
      </td>
    </ng-container> -->
    <ng-container matColumnDef="name6">
        <mat-header-cell *matHeaderCellDef mat-sort-header fxFlex="6">Estimate price</mat-header-cell>
        <mat-cell *matCellDef="let row"fxFlex="4" > 
            <p class="text-truncate" >{{row.EstimatePrice}} </p>
           
        </mat-cell>
    
    </ng-container>
    <ng-container matColumnDef="name7">
      <mat-header-cell *matHeaderCellDef mat-sort-header >No of pieces</mat-header-cell>
      <mat-cell *matCellDef="let row" > 
          <!-- <p class="text-truncate" *ngIf="!row.isEditable">{{row.NoofPieces}} </p> -->
          <div *ngIf="!row.isEditable">
              
  <input type="text" placeholder="" [(ngModel)]="row.NoofPieces" matInput style="    margin-top: 0px;
      border: 1px solid #ccc;
  width: 60px;
  height: 30px;
  border-radius: 6px;
  padding: 4px;"> 
            
             </div>
             </mat-cell>
    </ng-container>



    <ng-container matColumnDef="name9">
      <mat-header-cell *matHeaderCellDef mat-sort-header >Rate</mat-header-cell>
      <mat-cell *matCellDef="let row" > 
          <!-- <p class="text-truncate" *ngIf="!row.isEditable">{{row.Rate}} </p> -->
         
          <div *ngIf="!row.isEditable">

             
             <input type="text" placeholder="" [(ngModel)]="row.Rate" matInput style="    margin-top: 0px;
                 border: 1px solid #ccc;
             width: 60px;
             height: 30px;
             border-radius: 6px;
             padding: 4px;"> 
            
             </div>
      </mat-cell>
    </ng-container>



    <ng-container matColumnDef="name8">
      <mat-header-cell *matHeaderCellDef mat-sort-header >Notes</mat-header-cell>
      <mat-cell *matCellDef="let row" > 
          <!-- <p class="text-truncate" *ngIf="!row.isEditable">{{row.Note}} </p> -->
          <div *ngIf="!row.isEditable">

             
             <input type="text" placeholder="" [(ngModel)]="row.Note" matInput style="    margin-top: 0px;
                border: 1px solid #ccc;
             width: 120px;
             height: 30px;
             border-radius: 6px;
             padding: 4px;"> 
            
             </div>
      </mat-cell>
    </ng-container>
    



    <!-- Color Column -->
    <!-- <ng-container matColumnDef="color">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Edit </th>
      <td mat-cell *matCellDef="let row" [style.color]="row.color"> -->
          <!-- <button mat-raised-button *ngIf="!row.isEditable" (click)="save(row)" >
              <mat-icon style="color: blue;">check</mat-icon>
            </button> -->

       <!-- <button mat-icon-button *ngIf="!row.isEditable" (click)="editRow(row)">
          <mat-icon>edit</mat-icon>
        </button>  -->
      
        <!-- <button mat-icon-button *ngIf="indent.isEditable" (click)="save(row)" >
          <mat-icon style="color: blue;">check</mat-icon>
        </button>
        <button mat-icon-button *ngIf="!indent.isEditable" (click)="editRow(row)">
          <mat-icon>edit</mat-icon>
        </button> -->



      <!-- </td>
    </ng-container> -->
    <ng-container matColumnDef="color1">
      <mat-header-cell *matHeaderCellDef mat-sort-header fxLayoutAlign="end center" > Action
        </mat-header-cell>
      <mat-cell *matCellDef="let row" [style.color]="row.color" >
          <div fxFlex="row" fxLayoutAlign="end center"  > 
          <button mat-icon-button *ngIf="!row.isEditable" (click)="save(row)" onclick="this.disabled = true">
              <mat-icon style="color: blue;">check</mat-icon>
            </button>
         <button mat-icon-button (click)="delete(row)" onclick="this.disabled = true" >
          <mat-icon style="color:red">delete</mat-icon>
        </button> 
        </div>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="loading">
        <mat-footer-cell *matFooterCellDef colspan="6">
          Loading data...
        </mat-footer-cell>
      </ng-container>
      <ng-container matColumnDef="noData">
        <mat-footer-cell *matFooterCellDef colspan="6">
          No data.
        </mat-footer-cell>
      </ng-container>
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;">
    </mat-row>
    <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide':DetailList!=null}"></mat-footer-row>
    <mat-footer-row *matFooterRowDef="['noData']" [ngClass]="{'hide':!(DetailList!=null && DetailList.length==0)}"></mat-footer-row>
  </mat-table>


</div>









<fuse-sidebar name="addvendorDetailsForProduct"  position="right" class="width-500 p-12 bg-white" >
    <h3><strong> ADD Product </strong></h3>
    <form class="example-form" [formGroup]="productForm">
        <div class="" fxflex="1 0 auto" fxlayout="row" fxlayoutalign="start center">
          <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
              <mat-label>Product Name</mat-label>
              <input type="text" placeholder=" " matInput  formControlName="Name"/>
          </mat-form-field>
          <mat-form-field  fxFlex="50" appearance="outline">
              <mat-label>Net Weight<small>(in Kgs.)</small> </mat-label>
              <input type="text" placeholder="Net Weight(in Kgs.)" matInput  formControlName="NetWeight"/>
          </mat-form-field>
        </div>

       
        <div class="" fxflex="1 0 auto" fxlayout="row" fxlayoutalign="start center">
          <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
              <mat-label>Gross Weight <small>(in Kgs.)</small></mat-label>
              <input type="text" placeholder="Gross Weight(in Kgs.) " matInput  formControlName="GrossWeight"/>
          </mat-form-field>

          <mat-form-field  fxFlex="50" appearance="outline">
              <mat-label>Length <small>(in inch.)</small></mat-label>
              <input type="text" placeholder="Length (in inch.)" matInput name="pan"  formControlName="Length"/>
          </mat-form-field>   

        </div>



        <div class="" fxflex="1 0 auto" fxlayout="row" fxlayoutalign="start center">
          <mat-form-field  fxFlex="50" class="pr-24" appearance="outline">
              <mat-label>Width <small>(in inch.)</small></mat-label>
              <input type="text" placeholder="Width (in inch.)" matInput   formControlName="Width"/>
          </mat-form-field>

          <mat-form-field  fxFlex="50" appearance="outline">
              <mat-label>Height <small>(in inch.)</small></mat-label>
              <input type="text" placeholder="Height (in inch.)" matInput  formControlName="Height" />
          </mat-form-field>   

        </div>


       


          <div class="" fxflex="1 0 auto" fxlayout="row" fxlayoutalign="start center">
          
                <mat-label>Upload Design</mat-label>
                <input type="file" (change)="fileChange($event)"  #myInput>

          </div>




                
          <div class="" fxflex="1 0 auto" fxlayout="row" fxlayoutalign="start center" style="text-align: center">
<button mat-raised-button cdkFocusInitial onclick="this.disabled = true" color="accent" (click)="uploadFiles()" id="condition" [disabled]="!productForm.valid"  style="    margin-top: 25px;
text-align: center;
width: 232px;">Save</button>
</div>
</form>
    
  </fuse-sidebar>
  